<html>
<head>
	<script src="https://isomorphic-git.org/js/browserfs.js"></script>
	<script src="https://isomorphic-git.org/js/pify.js"></script>
	<script src="https://unpkg.com/isomorphic-git"></script>
	<script>

	let fsOptions = {
		fs: 'IndexedDB',
		options: {}
	}

	BrowserFS.configure(fsOptions, function (err) {
		if (err) return console.log(err)

		window.fs = BrowserFS.BFSRequire('fs')
		fs.getRootFS().empty()

		// Initialize isomorphic-git with our new file system
		git.plugins.set('fs', fs)

		// make a Promisified version for convenience
		window.pfs = pify(fs) 
		

		console.log(window.pfs)
		 
		window.dir = 'tutorial2';
		
		/*
		async function f1() {
		  	console.log(dir);
		  	await pfs.mkdir(dir);

		    // Now it should not be empty...
		    await pfs.readdir(dir);

			await git.clone({
			  	dir,
			  	corsProxy: 'https://cors.isomorphic-git.org',
			  	url: 'https://github.com/isomorphic-git/isomorphic-git',
			  	ref: 'master',
			  	singleBranch: true,
			  	depth: 10
			});

			//console.log("dir is" + dir);
			// Now it should not be empty...
			//await pfs.readdir(dir);
		}

		f1();
		*/
	})




	</script>
	<script src="IsoGitBrowser.js"></script>
</head>
</html>